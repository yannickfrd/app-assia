<div id="modal-rdv" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalRdvLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">

            <div class="modal-header d-block d-md-flex pb-2">
                <div class="col-12 col-lg-6">
                    <h2 class="h3" data-url="{{ path('support_show', {'id': '__id__'} ) }}"></h2>
                </div>
                <div class="col-12 col-lg-6">
                    <p class="mb-0 text-right small text-secondary" id="js-rdv-info"></p>
                </div>
            </div>

            {{ form_start(
                form_rdv,
                {'action': support is defined ? path('support_rdv_create', {'id': support.id}) : path('rdv_create')}
            ) }}
            <div class="modal-body pb-0">
                <div class="row mb-3">
                    <div class="col-12" id="modalRdvLabel">{{ form_widget(form_rdv.title) }}</div>
                </div>
                <div class="form-inline justify-content-md-right mb-2">
                    <div class="col-auto my-1 pr-1 pl-0 d-inline-flex">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text" title="Date" data-toggle="tooltip"
                                     data-placement="bottom"><i class="far fa-calendar text-black-50"></i>
                                </div>
                            </div>
                            <label class="sr-only required" for="date">Date</label>
                            <input type="date" id="date" name="date" required="required" class="form-control">
                        </div>
                    </div>
                    <div class="col-auto my-1 pr-1 pl-0 d-inline-flex">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text" title="Heure de début" data-toggle="tooltip"
                                     data-placement="bottom"><i class="far fa-clock text-black-50"></i>
                                </div>
                            </div>
                            <label class="sr-only required" for="start">Début</label>
                            <input type="time" id="start" name="start" required="required" class="form-control">
                        </div>
                        <div class="mx-1 pt-2">
                            <span>–</span>
                        </div>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text" title="Heure de fin" data-toggle="tooltip"
                                     data-placement="bottom"><i class="far fa-clock text-black-50"></i>
                                </div>
                            </div>
                            <label class="sr-only required" for="end">Fin</label>
                            <input type="time" id="end" name="end" required="required" class="form-control">
                        </div>
                    </div>
                    <div class="col-auto my-1 pr-1 pl-0 d-inline-flex">{{ form_widget(form_rdv.status) }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-12 col-lg-6 d-none">{{ form_widget(form_rdv.start) }}</div>
                    <div class="col-12 col-lg-6 d-none">{{ form_widget(form_rdv.end) }}</div>
                    <div class="col-12">
                        <div class="input-group" id="rdv_search_location">
                            <div class="input-group-prepend">
                                <div class="input-group-text" title="Localisation" data-toggle="tooltip"
                                     data-placement="bottom"><i class="fas fa-map-marker-alt text-black-50"></i>
                                </div>
                            </div>{{ form_widget(form_rdv.location) }}
                        </div>
                    </div>
                </div>
                <div class="row mb-2">
                    <div class="col-12">
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text" title="Étiquettes" data-toggle="tooltip"
                                     data-placement="bottom">
                                    <i class="fas fa-tag text-black-50"></i>
                                </div>
                            </div>
                            {{ form_widget(form_rdv.tags) }}
                        </div>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        {{ form_label(form_rdv.users, null, {label_attr: {class: 'col-12 col-sm-12'}}) }}
                        {{ form_widget(form_rdv.users) }}
                    </div>
                    <div class="col-md-6">
                        {{ form_label(form_rdv.supportGroup, null, {label_attr: {class: 'col-12 col-sm-12'}}) }}
                        {{ form_widget(form_rdv.supportGroup) }}
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-12">{{ form_widget(form_rdv.content) }}</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-6 mb-2 custom-control custom-checkbox custom-checkbox-{{ theme_color }}">
                        <div class="col-md-12">
                            {{ form_widget(form_rdv._googleCalendar, {attr: {'data-api-name': 'google'} }) }}
                        </div>
                    </div>
                    <div class="col-md-6 mb-2 custom-control custom-checkbox custom-checkbox-{{ theme_color }}">
                        <div class="col-md-12">
                            {{ form_widget(form_rdv._outlookCalendar, {attr: {'data-api-name': 'outlook'} }) }}
                        </div>
                    </div>
                </div>

                {% set alert_widget %}
                    <div class="form-inline mb-1">
                        <div class="d-inline-flex mr-2 mb-2">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <div class="input-group-text" title="Alerte" data-toggle="tooltip"
                                         data-placement="bottom">
                                        <i class="fas fa-bell text-black-50"></i>
                                    </div>
                                </div>{{ form_widget(form_rdv.alerts.vars.prototype.date) }}
                            </div>
                        </div>
                        <div class="d-inline-flex mr-2 mb-2">{{ form_widget(form_rdv.alerts.vars.prototype.type) }}</div>
                        <div class="d-inline-flex mb-2">
                            <button class="btn btn-sm btn-danger" data-action="remove"><i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                {% endset %}

                <div class="row mb-3">
                    <div class="col-md-12">
                        <div id="alerts-fields-list" data-prototype="{{ alert_widget|e }}"
                             data-container-tag="div" data-widget-counter="{{ form_rdv.alerts|length }}">
                        </div>
                        <button type="button" class="btn btn-{{ theme_color }} btn-sm"
                                data-list-selector="#alerts-fields-list" data-add-widget="alert"
                                data-url="/alert/__id__/toggle-status">
                            <i class="fas fa-plus-square mr-2"></i>Ajouter un rappel
                        </button>
                    </div>
                </div>
                {{ form_row(form_rdv._token) }}
            </div>
            <div class="modal-footer d-flex justify-content-between">
                <div class="float-left">
                    <button id="modal-btn-delete" class="mr-3 btn btn-danger" data-placement="bottom"
                            data-action="delete-rdv-modal" data-url="{{ path('rdv_delete', {'id': '__id__'}) }}"
                            title="Supprimer le rendez-vous"><span class="fas fa-trash-alt"></span>
                        <span class="d-md-inline ml-2">Supprimer</span>
                    </button>
                </div>
                <div class="float-right">
                    <button type="button" id="js-btn-cancel" class="btn btn-secondary" data-dismiss="modal">Fermer
                    </button>
                    <button type="button" class="btn btn-{{ theme_color }} shadow" data-action="save-rdv">
                        <span class="fas fa-save mr-2"></span>Enregistrer
                    </button>
                </div>
            </div>

            {{ form_end(form_rdv, {'render_rest': false}) }}

        </div>
    </div>
</div>
